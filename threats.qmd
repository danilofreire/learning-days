---
title: "Amenazas a la validez interna de los experimentos aleatorizados"
subtitle: "C√≥mo (intentar) evitar que tu experimento se convierta en un desastre"
author:
  - name: Danilo Freire
    email: danilo.freire@emory.edu
    affiliations: Emory University
format:
  clean-revealjs:
    self-contained: true
    footer: "[Amenazas](https://danilofreire.github.io/learning-days/threats.html)"
bibliography: references.bib
transition: slide
transition-speed: default
scrollable: true
engine: knitr
editor:
  render-on-save: true
---

# Revisi√≥n de los supuestos principales üë®üèª‚Äçüè´üìö {background-color="#2d4563"}

## Puntos clave de esta presentaci√≥n

:::{style="margin-top: 30px;"}
:::

::::{.columns}
:::{.column width="50%"}
:::{style="font-size: 27px;"}
 - Deserci√≥n (variables de resultado con datos faltantes)

 - Incumplimiento

 - Derrame

 - Efecto Hawthorne

 - Tratamiento diferencial de los distintos brazos de tratamiento

- Repaso de los supuestos principales

  1. Exclusi√≥n 

  2. No interferencia

  3. Asignaci√≥n aleatoria de sujetos al tratamiento
:::
:::

:::{.column width="50%"}
![](./images/though-so.jpg)
:::
::::

# Deserci√≥n üèÉüèª‚Äç‚ôÇÔ∏è {background-color="#2d4563"}

## Deserci√≥n (variables de resultado con datos faltantes)
### Attrition

:::{style="margin-top: 30px;"}
:::

:::{style="font-size: 25px;"}
:::{.incremental}
- Algunas unidades pueden tener [datos faltantes para las variables de resultado]{.alert} (= las unidades desertan) cuando:
  - algunos encuestados no pueden ser encontrados o se niegan a participar en la recolecci√≥n de datos finales.
  - se pierden algunos registros.

- Esto es problem√°tico cuando los datos faltantes han sido ocasionados por el tratamiento.

  - Por ejemplo, el tratamiento puede haber provocado la migraci√≥n de unidades y no hay forma de acceder a ellas.

- Si analizamos los datos descartando unidades con datos faltantes para la variable de resultado, [entonces ya no estar√≠amos comparando grupos de tratamiento y control similares]{.alert}.
:::
:::

# ¬øQu√© podemos hacer? ü§îüßê {background-color="#2d4563"}

## ¬øQu√© podemos hacer?
### Un checklist

:::{style="margin-top: 30px;"}
:::

::::{.columns}
:::{.column width="50%"}
:::{style="font-size: 25px;"}
:::{.incremental}
- Compruebe si las [tasas de deserci√≥n son similares]{.alert} en los grupos de tratamiento y control.

- Compruebe si las covariables de los grupos de tratamiento y control tienen [padrones similares]{.alert}.

- [No elimine las observaciones con datos faltantes]{.alert} en las variables de resultado.

- A veces, cuando faltan datos en la variable de resultados, [podemos acotar ("bound") nuestras estimaciones]{.alert} del efecto del tratamiento.
:::
:::
:::

:::{.column width="50%"}
![](./images/data-loss.jpeg)
:::
::::

## ¬øQu√© podemos hacer?

:::{style="margin-top: 40px;"}
:::

:::{style="font-size: 29px;"}
- Pero la mejor soluci√≥n es tratar de anticipar y prevenir la deserci√≥n.
:::

:::{style="margin-top: 30px;"}
:::

::::{.columns}
:::{.column width="50%"}
:::{style="font-size: 27px;"}
:::{.incremental}
- Personas que [no sepan a qu√© condici√≥n]{.alert} del tratamiento fueron asignadas.
- Prometerle al grupo de control que [va a recibir el tratamiento]{.alert} na vez concluida la investigaci√≥n.
- [Planificar ex ante]{.alert} para poder contactar a los sujetos en para la recolecci√≥n final de datos.
- Contar con presupuesto para haver [seguimiento intensivo]{.alert} a una muestra aleatoria de los sujetos que desierten
:::
:::
:::

:::{.column width="50%"}
![](./images/missing.jpg)
:::
::::

## Los datos faltantes en covariables de contexto no son tan problem√°ticos

:::{style="margin-top: 40px;"}
:::

::::{.columns}
:::{.column width="50%"}
:::{style="font-size: 25px;"}
- La ausencia de datos en [covariables de contexto]{.alert} (es decir, variables cuyos valores no cambian como resultado del tratamiento) para algunas observaciones [es menos problem√°tica]{.alert}. 

:::{.incremental}
- Podemos aprender sobre el efecto causal de un experimento incluso sin esas covariables
  
- Podemos usar la covariable de contexto seg√∫n lo planeado [imputando los datos faltantes]{.alert}
  
- Tambi√©n podemos condicionar nuestro an√°lisis directamente a esos datos faltantes
:::
:::
:::

:::{.column width="50%"}
![](./images/Imputation.jpg)
:::
::::

# Incumplimiento üö´‚úã {background-color="#2d4563"}

## Incumplimiento
### Non-compliance

:::{style="margin-top: 30px;"}
:::

:::{style="font-size: 27px;"}
:::{.incremental}
- En algunas ocasiones [las unidades que son asignadas al tratamiento terminan no recibi√©ndolo]{.alert}. Es decir, no cumplen la asignaci√≥n.
  
- Si todas las unidades asignadas al grupo de control no toman el tratamiento, pero s√≥lo algunas unidades asignadas al tratamiento s√≠ lo toman, estamos frente a un caso de incumplimiento unilateral.
      
- El efecto de ser asignado al tratamiento no es el mismo que el de recibir el tratamiento.
  
- El efecto de recibir el tratamiento es comunmente conocido como "efecto local promedio del tratamiento" ([Local Average Treatment Effect, LATE]{.alert}) o efecto promedio del tratamiento para el cumplidor ([Complier Average Causal Effect, CACE]{.alert}).  
  
- La palabra ‚Äúlocal‚Äù hace referencia a la idea de que el efecto solo aplica para las personas que toman el tratamiento cuando son asignadas a √©ste (el tipo de personas). 
:::
:::

## LATE/CACE

:::{style="margin-top: 40px;"}
:::

:::{style="font-size: 27px;"}
- Es necesario que se cumplan dos supuestos para poder estimar el LATE/CACE a partir de un experimento aleatorio.

:::{.incremental}
  
1. [Restricci√≥n de exclusi√≥n]{.alert}: la asignaci√≥n del tratamiento solo afecta la variable de resultado a trav√©s de la recepci√≥n del tratamiento y no a trav√©s de ning√∫n otro canal.
2. [Supuesto de monotonicidad]{.alert}: no hay unidades desobedientes, es decir, unidades que toman el tratamiento solo cuando son asignadas a control pero no toman el tratamiento cuando son asignados a este ("defiers").
3. [Independencia]{.alert}: la asignaci√≥n al tratamiento es independiente de la respuesta potencial a la asignaci√≥n al tratamiento.
4. [SUTVA]{.alert}: no hay interferencia entre las unidades y no hay versiones diferentes del tratamiento.
5. [Relevancia del instrumento]{.alert}: el instrumento utilizado para asignar el tratamiento es relevante para la asignaci√≥n al tratamiento ($Z$ est√° asociado con $T$).
:::
:::

# Derrame ü´ü {background-color="#2d4563"}

## Derrame e interferencia entre unidades
### Spillover and interference between units

:::{style="margin-top: 30px;"}
:::

::::{.columns}
:::{.column width="50%"}
:::{style="font-size: 25px;"}
- A veces tendremos sospechas de que la asignaci√≥n al tratamiento de una unidad [afecta los resultados de otras unidades]{.alert}.

- Si el tratamiento de una unidad afecta el resultado de otra unidad, estamos [violando uno de los supuestos b√°sicos de inferencia causal]{.alert}.

- Podemos seleccionar unidades que est√°n [lejos unas de otras]{.alert} para evitar la "transmisi√≥n" del tratamiento entre unidades.
:::
:::

:::{.column width="50%"}
![](./images/spillover.webp)
:::
::::

## Estudiar los efectos secundarios

:::{style="margin-top: 40px;"}
:::

:::{style="font-size: 28px;"}
- Esto no es un problema [si dise√±as un estudio que permita investigar el derrame]{.alert}, es decir, que los resultados de una unidad pueden depender del tratamiento de otras unidades.

- Para investigar los efectos de derrame:

:::{.incremental}
- Podemos [recolectar datos]{.alert} de la variable de resultado para las unidades que nunca fueron elegibles para la asignaci√≥n aleatoria al tratamiento, pero que estaban cerca de unidades que s√≠ eran elegibles para el tratamiento y que pudieron verse afectadas por efectos de derrame.

- Podemos utilizar un [dise√±o de asignaci√≥n aleatoria en dos etapas]{.alert}.

- Podemos asignar grupos de unidades (p. Ej., Distritos) [a diferentes niveles de intensidad de tratamiento]{.alert} (p. Ej., Usar una proporci√≥n diferente de aldeas en los distritos asignados al tratamiento).
:::
:::    

# Efecto Hawthorne üëÄüì∏ {background-color="#2d4563"}

## Efecto Hawthorne üòá

:::{style="margin-top: 30px;"}
:::

::::{.columns}
:::{.column width="50%"}
:::{style="font-size: 27px;"}
- El efecto Hawthorne: [saber que est√°n siendo observados/estudiados]{.alert} puede llevar a los sujetos a comportarse de manera diferente.

- Esto podr√≠a crear un [error de medici√≥n sistem√°tico]{.alert} tanto en los grupos de tratamiento como en los de control.

- Tambi√©n podr√≠a resultar de una [mayor atenci√≥n prestada al grupo de tratamiento]{.alert}, deshaciendo la creaci√≥n de grupos de tratamiento y control equivalentes creados a trav√©s de la asignaci√≥n aleatoria
:::
:::

:::{.column width="50%"}
![](./images/hawthorne.jpg)
:::
::::

## Buenas practicas

:::{style="margin-top: 40px;"}
:::

-  Recolectar datos de la forma m√°s discreta posible.
   
- En la medida de lo posible, nadie m√°s que el propio sujeto debe conocer a qu√© condici√≥n de tratamiento fue asignado.

- Encuestadores/investigadores deber√≠an desconocer la condici√≥n de tratamiento de los sujetos.

- No debemos hacer mediciones adicionales para el grupo de tratamiento.

# No excluibilidad üôÖ‚Äç‚ôÄÔ∏è {background-color="#2d4563"}

## Diferencias entre los grupos de tratamiento y control m√°s all√° del tratamiento

:::{style="margin-top: 30px;"}
:::

- Manejar los grupos de tratamiento y control de manera diferente significa que las diferencias observadas en las variables de resultado entre estos grupos pueden deberse al tratamiento y/o al manejo diferente.
   
- Los ejemplos incluyen el uso de diferentes cuestionarios para la recolecci√≥n de datos o rondas adicionales de recolecci√≥n de datos para el grupo de tratamiento con la intenci√≥n de obtener informaci√≥n sobre los mecanismos.
   
- Recuerde dise√±ar su estudio y sus encuesta para tratar todos los brazos de tratamiento por igual, excepto por el tratamiento en s√≠.

# {background-image="./images/preguntas.jpg"}
   